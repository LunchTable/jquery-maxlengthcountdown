/**
 *   jQuery maxlength-countdown
 *   Adds a "remaining characters" counter after any field with maxlength field.
 *
 *   Copyright 2013 Matt Baer
 */
(function(a){a.fn.maxlengthCountdown=function(b){var c={countClass:"count-me-down",suffixText:"",suffixTextSingular:"",before:true,visible:true,alwaysOn:true,showThres:0};b=a.extend(c,b);if(b.suffixText!==""&&b.suffixTextSingular===""){b.suffixTextSingular=b.suffixText}return this.filter("input").not("[type=checkbox], [type=radio]").each(function(){var j=a(this),h;var e=j.attr("maxlength");var g=function(){var k;if(b.showThres>0){counterDiv='<div style="display:none;" />'}else{counterDiv="<div />"}if(b.before){j.before(counterDiv);h=j.prev("div")}else{j.after(counterDiv);h=j.next("div")}h.addClass(b.countClass).text(e+" "+b.suffixText)};var f=function(){j.off("blur");h.hide();j.on("focus",d)};var d=function(){j.off("focus");if(b.showThres===0||(e-j.val().length)<=b.showThres){h.show()}j.on("blur",f)};var i=function(){var k=e-j.val().length;h.text(k+" "+(k===1?b.suffixTextSingular:b.suffixText));if(b.showThres>0){if(k<=b.showThres){h.show()}else{if(!b.alwaysOn){h.hide()}}}};if(e!==undefined&&e>0){if(b.visible){g();j.on("keyup blur",i)}else{if(b.alwaysOn){j.on("focus",function(){a(this).off("focus");g();j.on("keyup blur",i)})}else{j.on("focus",function(){a(this).off("focus");g();j.on("keyup blur",i)});j.on("blur",f)}}}})}})(jQuery);
